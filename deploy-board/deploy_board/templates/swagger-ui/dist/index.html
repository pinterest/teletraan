{% comment %} <!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="icon" href="<%= BASE_URL %>favicon.ico">
        <script src="{% static "js/vue.min.js" %}"></script>
        <script type="module" src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"></script>
        <title>RapiDoc</title>
    </head>
    <template>
        <div>
            <!-- For render-style=read you should try to provide height of rapi-doc element as it needs to calculate scroll positions-->
            <rapi-doc spec-url="https://petstore.swagger.io/v2/swagger.json" render-style="read" style="height:100vh; width:100%"></rapi-doc>
        </div>
    </template>
    <script>
        Vue.config.productionTip = false;

        new Vue({
        render: h => h(this)
        }).$mount("#app");

</script>
    <body>
        <div id="app"></div>
        <!-- built files will be auto injected -->
    </body>
</html> {% endcomment %}
<!DOCTYPE html> <!-- Important: must specify -->
<html>
    <head>
        <meta charset="utf-8">
        <!-- Important: rapi-doc uses utf8 characters -->
        <script type="module" src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"></script>
    </head>
    <body>
        <rapi-doc id="apidoc" spec-url="http://0.0.0.0:8011/swagger.json" server-url="http://0.0.0.0:8011/" allow-authentication ="false">
        <!--
          below html is custom html that adds an input field and a button in header
          on clicking the button the 'api-key-value' is set to the value in input box
        -->
        <div slot='header' style='display:flex; margin:0 16px;'>
            <input class='txt'
                   id='key-val-input'
                   type='text'
                   placeholder="Oauth2 Jwt Token">
            <button class='btn' onclick='setApiKey()'>Apply</button>
        </div>
        </rapi-doc>
        <script>
            function setApiKey(){
              const docEl = document.getElementById('apidoc');
              const keyInputEl = document.getElementById('key-val-input');
              docEl.setAttribute('api-key-name','Authentication');
              docEl.setAttribute('api-key-location','header');
              docEl.setAttribute('api-key-value',"Bearer " + keyInputEl.value);
            }
        </script>
    </body>
</html>
